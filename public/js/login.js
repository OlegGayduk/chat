const server="https://oleg-chat.herokuapp.com";window.onload=function(){const b=/Mobile|webOS|BlackBerry|IEMobile|MeeGo|mini|Fennec|Windows Phone|Android|iP(ad|od|hone)/i.test(navigator.userAgent);if(!0==b){let a=document.createElement("div");a.className="next-icon",document.getElementsByClassName("come-button")[0].append(a)}var c=getXhrType();c.open("GET","https://oleg-chat.herokuapp.com/login_check"),c.setRequestHeader("Content-Type","application/json"),c.send(),c.onload=function(){0!=this.responseText&&(window.location="chat.html")},c.onerror=function(){alert("Server error! Please try again later!")}};function getXhrType(){var a;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){a=0}}return a||"undefined"==typeof XMLHttpRequest||(a=new XMLHttpRequest),a}function sanitize(b){return b.replace(/<script>|[\t\r\n]|(--[^\r\n]*)|(\/\*[\w\W]*?(?=\*)\*\/)/gim, "")}function request(b){if(b.preventDefault(),""!=document.getElementById("login").value&&""!=document.getElementById("pass").value){document.getElementById("error-log").innerHTML="";var c=getXhrType();c.upload.onprogress=function(a){document.getElementsByClassName("request-progress")[0].style.width=Math.round(100*a.loaded/a.total)+"%"},c.open("POST","https://oleg-chat.herokuapp.com/login");var d={login:sanitize(document.getElementById("login").value),pass:sanitize(document.getElementById("pass").value)};c.setRequestHeader("Content-Type","application/json"),c.send(JSON.stringify(d)),c.onload=function(){document.getElementsByClassName("request-progress")[0].style.width="0px",0==this.responseText?alert("No such user found! Please try again!"):window.location="chat.html"},c.onerror=function(){alert("Server error! Please try again later!")}}else document.getElementById("error-log").innerHTML="Fill in all the fields!",""==document.getElementById("login").value?document.getElementById("login").focus():document.getElementById("pass").focus()}